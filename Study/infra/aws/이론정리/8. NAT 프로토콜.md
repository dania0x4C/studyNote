NAT(Network Address Translation)는 **네트워크 주소 변환** 기술로, 로컬 네트워크(내부 네트워크)에서 사용되는 **사설 IP 주소**를 공인 IP 주소로 변환하여 인터넷과 통신할 수 있게 하는 프로토콜입니다. NAT는 주로 **공인 IP 주소의 절약**, **보안성 강화**, 그리고 **로컬 네트워크 관리**를 위해 사용

NAT는 **라우터**와 같은 장치에서 동작하며, 로컬 네트워크에서 인터넷으로 나가는 모든 데이터를 **공인 IP 주소**로 변환합니다. 반대로, 외부에서 로컬 네트워크로 들어오는 데이터는 **사설 IP 주소**로 변환되어 내부 장치로 전달

### NAT의 역할

1. **IP 주소 변환**: 사설 IP 주소를 공인 IP 주소로 변환하여 내부 네트워크의 장치들이 인터넷에 접속할 수 있도록 합니다.
2. **공인 IP 주소 절약**: 하나의 공인 IP 주소로 여러 대의 내부 장치가 인터넷에 접속할 수 있게 합니다.
3. **보안성**: 외부에서 직접적으로 사설 IP에 접근할 수 없기 때문에 보안이 강화됩니다.
### NAT의 종류

1. **정적 NAT(Static NAT)**:
    
    - 사설 IP와 공인 IP를 **1:1**로 매핑합니다.
    - 예를 들어, 내부 IP `192.168.1.10`이 항상 공인 IP `203.0.113.10`으로 매핑됩니다.
    - 일반적으로 **고정된 서비스**(예: 내부 서버)가 외부에서 접근 가능해야 할 때 사용됩니다.
2. **동적 NAT(Dynamic NAT)**:
    
    - 사설 IP 주소를 여러 개의 공인 IP 주소 중에서 **동적으로** 매핑합니다.
    - 내부 장치가 인터넷에 접속할 때마다 사용할 수 있는 공인 IP 주소가 달라질 수 있습니다.
    - **공인 IP 풀**을 사용하므로, 사용 가능한 공인 IP가 없으면 NAT가 요청을 처리하지 못할 수 있습니다.
3. **PAT(포트 주소 변환) 또는 오버로딩 NAT**:
    
    - 하나의 **공인 IP 주소**를 가지고 여러 개의 **사설 IP 주소**를 관리합니다.
    - 포트 번호를 기반으로 각각의 내부 장치를 구분합니다. 내부 네트워크에서 나가는 요청마다 고유의 포트 번호를 할당하고, 응답이 들어올 때 이 포트 번호를 사용하여 어느 장치로 보낼지 결정합니다.
    - 예시: 컴퓨터 A(192.168.1.2)는 포트 1234를, 컴퓨터 B(192.168.1.3)는 포트 5678을 할당받아 공인 IP를 공유할 수 있습니다.
    - **가장 많이 사용되는 방식**으로, 가정용 라우터에서 주로 사용됩니다.
- ### NAT의 한계 및 문제점

1. **P2P 연결의 어려움**: NAT 뒤에 있는 장치는 외부에서 직접 접근하기 어려워서, P2P(피어 투 피어) 연결이 어렵습니다. 예를 들어, 온라인 게임에서 다른 플레이어가 NAT 뒤에 있는 사용자의 게임 클라이언트에 연결하는 것이 복잡해집니다.
    - 이를 해결하기 위해 **포트 포워딩**이나 **UPnP(Universal Plug and Play)** 등의 기술을 사용합니다.
2. **연결 상태 추적**: NAT는 들어오는 모든 요청에 대해 내부 장치와의 연결 상태를 추적해야 하므로, 매우 많은 트래픽이 발생하면 라우터에 부담이 될 수 있습니다.

### NAT와 보안

- NAT는 **기본적인 방화벽 역할**을 합니다. 외부에서 직접적으로 내부 사설 IP에 접근할 수 없기 때문에, 공격자가 내부 네트워크를 쉽게 공격하지 못합니다.
- 그러나 NAT는 **보안 솔루션** 자체는 아니므로, 방화벽이나 기타 보안 시스템과 함께 사용하는 것이 중요합니다.

### NAT를 통한 포트 포워딩

- 특정 내부 서버나 장치가 외부에서 접근 가능해야 할 때 **포트 포워딩**을 사용합니다.
- 예를 들어, 내부 네트워크에 있는 웹 서버(192.168.1.10)가 외부에서 접근 가능해야 한다면, 라우터에서 **80번 포트**로 들어오는 요청을 해당 내부 IP로 전달하도록 설정할 수 있습니다.

### AWS에서 NAT의 역할

AWS에서 NAT는 프라이빗 서브넷에 있는 인스턴스들이 **인터넷으로 아웃바운드 트래픽(예: 외부로 나가는 요청)을 보낼 수 있도록** 하면서, **외부에서 직접 접근할 수 없도록** 만듭니다. 즉, NAT는 보안과 인터넷 연결 사이의 균형을 유지하는 역할을 합니다.