# MessageQueue
	- 메시징 미들웨어(MOM) 솔루션의 구성요소 독립적인 애플리케이션과 서비스에서 정보 교환에 사용됨
- 데이터 패킷을 전송되는 순서대로, 이용하는 애플리케이션에서 처리가 가능할때까지 데이터를 유지
- 네트워크가 중간에 문제가 생겨도 메시지를 유지하는 것 -> 처리가 안 되면 재전송 로직이 존재함
- 즉, 비동기식(하나 씩 전송되는) 메시징 모델이라고 한다.
-  프로세스와 애플리케이션을 분리하여 통신을 자체 포함하고(각 프로세스마다 자체적인 통신이 가능한 방법을 가지고 있다.) 이벤트 기반으로 유지하여 서비스를 독립적으로 유지

- **애플리케이션 간 연결성:** 일부 메시지 큐 솔루션에서는 메시지 암호화, 트랜잭션 속성을 비롯하여 애플리케이션과 서비스 간의 각종 통신 요소를 다룰 수 있습니다. 그러면 애플리케이션 개발이 간소화되고, 상이한 아키텍처 간의 연동이 가능해집니다.

- **강화된 보안:** 메시지 큐에서는 모든 메시지를 식별하고 인증할 수 있습니다. 일부 메시지 큐 솔루션은 메시지가 저장될 때, 전송될 때, 또는 아예 처음부터 끝까지(end-to-end) 메시지를 암호화하도록 설정할 수도 있습니다. 이는 애플리케이션 및/또는 인프라 전반의 보안에 기여할 수 있습니다.

- **통합 파일 전송:** 일부 [메시지 큐 솔루션](https://www.ibm.com/kr-ko/products/mq/advanced)은 파일 전송과 같은 부가 기능도 제공합니다. 이는 파일 전송 솔루션이 쓰이는 엔터프라이즈 환경에서 FTP의 대안이 될 수 있습니다.

1. **BullMQ** 와 **RabbitMQ**

BullMQ - redis 사용 -> 앱 빌드, 간단한 대기열 필요할때 사용
RabbitMQ - RabbitMQ 사용 -> 여러 언어 통신, 복잡한 라우팅, 지속 가능한 메시징

| **상황**                                                            | **추천**                     |
| ----------------------------------------------------------------- | -------------------------- |
| 단일 서비스 내에서 NestJS + 간단한 영상처리 백그라운드 처리                             | **BullMQ**                 |
| 여러 언어(예: Python + Node) 간 통신 필요 or 처리 흐름 복잡 (예: 라우팅, 확인 응답, 보류 등) | **RabbitMQ**               |
| 영상 데이터 전송                                                         | 파일은 S3/로컬 저장소, 메시지에는 경로만 담 |
나의 서비스는 python 서버와의 통신이 아닌 lambda를 통한 통신이기 때문에 bullmq를 이용 예정, redis는 이미 사용중임

nest 공식 repo: https://docs.nestjs.com/techniques/queues

| **용어**       | **역할**                                        |
| ------------ | --------------------------------------------- |
| **Producer** | 큐에 **작업을 넣는 쪽**                               |
| **Consumer** | 큐에서 **작업을 꺼내 실행하는 쪽**, 작업을 처리하거나 이벤트 수신 대기    |
| **Listener** | (보통 Consumer 안에서) **작업(Job)의 상태나 이벤트를 듣는 함수** |
|              |                                               |





